description:
    name: mujoco_ant_bs_clip_search
    description: Mujoco Ant study

batch:
    type: slurm
    host: pascal
    bank: aiwargm
    queue: pbatch

env:
    variables:
        OUTPUT_PATH: /p/lustre1/maguire7/bs-clip-mujoco-ant
        ENV_PATH: source /usr/workspace/maguire7/virtual_env/bsclip//bin/activate
        RUNNER: /usr/workspace/wsb/maguire7/decsup/ppo_and_friends/baselines/gymnasium/ant.py

generator.parameters:
    BS_CLIP_MIN:
      values: ["-0.001", "-0.0001", "-0.00001", "0.0", "0.00001", "0.0001", "0.001", "0.01", "0.1", "1.0"]
      label: BS_CLIP_MIN.%%
    SEED:
      values: [0]
      label: SEED.%%
    LR:
      #values: ["0.0001"]
      values: ["0.001", "0.0003", "0.0005", "0.0001"]
      label: LR.%%
    ACTOR_HIDDEN:
      #values: [256]
      values: [32, 64, 128, 256]
      label: ACTOR_HIDDEN.%%
    CRITIC_MULT:
      #values: [1]
      values: [1, 2]
      label: CRITIC_MULT.%%
    TS_PER_EP:
      #values: [16]
      values: [16, 32, 64, 128, 256]
      label: TS_PER_EP.%%

study:
    - name: MujocoAnt
      description: Run an experiment with PPO-AF
      run:
          cmd: |
            source $(ENV_PATH)

            $(LAUNCHER) ppoaf train $(RUNNER) \
                --num_timesteps 50_000_000 \
                --random_seed $(SEED) \
                --bs_clip_min $(BS_CLIP_MIN) \
                --learning_rate $(LR) \
                --actor_hidden $(ACTOR_HIDDEN) \
                --critic_hidden_mult $(CRITIC_MULT) \
                --max_ts_per_ep $(TS_PER_EP) \
                --state_tag seed_$(SEED)-bs_clip_min_$(BS_CLIP_MIN)-lr_$(LR)-actor_hidden_$(ACTOR_HIDDEN)-critic_mult_$(CRITIC_MULT)-ts_per_ep_$(TS_PER_EP)

          nodes: 1
          procs: 36
          exclusive: True
          walltime: "24:00:00"
